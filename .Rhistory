ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", segment.size  = .3,
data = days_since_data %>% group_by(country) %>% filter(days_since_first == max(days_since_first))
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", segment.size  = .3,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >- 5)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", segment.size  = .3,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >- 5)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", segment.size  = .3,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 5)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", segment.size  = .3,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 10)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
?ggrepe::geom_label_repel
?ggrepel::geom_label_repel
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", segment.size  = .3, min.segment.length = 10,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 10)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", min.segment.length = 10,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 10)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", nudge_x = 5,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 10)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", nudge_x = 25,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 10)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", nudge_x = 10,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 10)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", nudge_x = 10,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 7)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", nudge_x = 10,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 5)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
days_since_data <-
tidied_data %>%
filter(type == "confirmed") %>%
filter(higher != "Cruise Ship") %>%
group_by(higher, date) %>%
summarise(n = sum(n)) %>%
ungroup() %>%
group_by(higher) %>%
arrange(date) %>%
filter(n >= 100) %>%
mutate(first_date = date[1]) %>%
mutate(days_since_first = date - first_date) %>%
mutate(max_days_since_first = max(days_since_first)) %>%
ungroup() %>%
mutate(country = fct_reorder(higher, desc(max_days_since_first))) %>%
mutate(country_label = glue::glue("{country}, {max_days_since_first} days")) %>%
filter(country != "Others")
days_since_data %>%
ggplot(aes(x = days_since_first, y = n, group = country, colour = country_label)) +
geom_line() +
ggrepel::geom_label_repel(aes(label = country_label), show.legend = FALSE, segment.color = "grey", nudge_x = 10,
data = days_since_data %>%
group_by(country) %>%
filter(days_since_first == max(days_since_first)) %>%
filter(days_since_first >= 5)
) +
scale_y_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
labs(
title = "Confirmed cases after first 100 cases",
subtitle = "Arranged by number of days since 100 or more cases. Countries with 5 or more days labelled",
x = "Days after 100 confirmed cases",
y = "Confirmed cases (log scale)",
caption = "Source: Johns Hopkins CSSE"
) +
theme(
legend.position = "none"
)
ggsave(here("figures", "days_since_100_oneplot.png"), height = 15, width = 25, units = "cm", dpi = 300)
